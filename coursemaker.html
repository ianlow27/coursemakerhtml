<!DOCTYPE html><html><head><script>
let theme='classic';
let pgmode='landing';
let bdbgmode=false;//true; //false; //true; //false;
let coursefile='./coursedata.js';
let coursename='';
let coursedesc='';
let coursefldr='';
let sectionfldr='';
let sectionlist="";
let lngcontinue='Continue';
let lngcurrency='dollars';
let lngsteps='Steps';
let lngstepsleft='Steps left';
let lngtotscore='Total score';
let lngcrncysym='$';
let lngrestart='Restart';
let maxsteps=5;
let gmtotqstn=0;
/* https://www.prosettings.com/emoji-list/#google_vignette
💎  🎉  🎯 🏆 💫 💝 💖 🍒 🌟 🚀 ⭐ ✨	
🏠	🏡  ▶	⏭	⏯	◀  ⏮	
*/
let gmtotrght=0;
let gmtotwrng=0;
let lngtotqstn='Total questions';
let lngtotrght='Right';
let lngtotwrng='Wrong';
let currsteps=0;
let currmoney=0;
let currscore=0;
let b_en_btn = false;
let lesson01='';let lesson02='';let lesson03='';let lesson04='';let lesson05='';let lesson06='';let lesson07='';let lesson08='';let lesson09='';
let lesson10='';let lesson11='';let lesson12='';let lesson13='';let lesson14='';let lesson15='';let lesson16='';let lesson17='';let lesson18='';let lesson19='';
let lesson20='';let lesson21='';let lesson22='';let lesson23='';let lesson24='';let lesson25='';let lesson26='';let lesson27='';let lesson28='';let lesson29='';
let lesson30='';let lesson31='';let lesson32='';let lesson33='';let lesson34='';let lesson35='';let lesson36='';let lesson37='';let lesson38='';let lesson39='';let lesson40='';let lesson41='';let lesson42='';let lesson43='';let lesson44='';let lesson45='';let lesson46='';let lesson47='';let lesson48='';let lesson49='';let lesson50='';
let startqst=1; //0;//2; //2;// 0;
let asections=new Array(); 
let asectparts=new Array(); 
let anum2sect=new Array(); 
let fllblnkvals='';
</script>
<!-- script src='./coursedatax.js'></script -->
<!-- script src='./coursedata1.jsx'></script -->
<script>
//---------🔴--------------🟢----------------
//--------------------------------------
function sections1(){
try{
  //alert(sectionlist);
const atmpsects=sectionlist.split(/%%%/);
anum2sect[0]="";
totsects=0;
for(i in atmpsects){
  const atmp1=atmpsects[i].split(/\|/);
  asections[atmp1[1]]=atmp1[0];
  asectparts[atmp1[1]]=Number(atmp1[2]);
  anum2sect[Number(i)+1]=atmp1[1];
//alert(anum2sect[Number(i)+1]+'__'+(i+1));
  totsects++;
  //alert(asections[atmp1[1]]+'='+atmp1[0]);
}//endfor
//alert(22);
  //alert(totsects);
}catch(e){
  dbgx(e.message);
}
}//endfunc
//=======================================
let currpartid=0;
let prevpartid=0;
const appref='coursemakerhtml_'+coursefldr+'_';
let part01='';let part02='';let part03='';let part04='';let part05='';let part06='';let part07='';let part08='';let part09='';
let part10='';let part11='';let part12='';let part13='';let part14='';let part15='';let part16='';let part17='';let part18='';let part19='';
let part20='';let part21='';let part22='';let part23='';let part24='';let part25='';let part26='';let part27='';let part28='';let part29='';
let part30='';let part31='';let part32='';let part33='';let part34='';let part35='';let part36='';let part37='';let part38='';let part39=''; let part40='';let part41='';let part42='';let part43='';let part44='';let part45='';let part46='';let part47='';let part48='';let part49='';let part50='';

//----------------------------------
</script>
<style>
pre  {xfont-family: Times New Roman;white-space:pre-wrap;xfont-size:70%;word-wrap:break-word;margin:0px;padding:0px;width:98%;} /*!!*/
textarea {font-size:100%;font-family: Arial;Times New Roman;}
button {font-size:80%;}
::xbackdrop { background-image: linear-gradient( 45deg, grey, aliceblue, lightblue, azure); opacity: 0.40;}
::backdrop { background-image: linear-gradient( 0deg, darkgrey, darkgrey, darkgrey, darkgrey); opacity: 0.75;}
.test1 {background-color:black;color:white;}
.test2 {background-color:yellow;color:blue;}



.light{background-color:white;color:black;font-family: Times New Roman;}
.dark{background-color:black;color:white;font-family: Times New Roman;}

.safari{background-color:darkgreen;color:moccasin;font-family: courier;}
.sahara{background-color:moccasin;color:saddlebrown;font-family: courier;} 
.spacepod{background-color:aliceblue;color:darkslategrey;font-family: courier; xx: monospace;}
.funkypop{background-color:lemonchiffon;color:magenta;font-family:Arial; xx: sans-serif;}  
.arty{background-color:linen;color:mediumblue;font-family: cursive;}
.cafe{background-color:papayawhip;color:saddlebrown;font-family: cursive;}
.classic{background-color:white;color:black;font-family:times new roman; xx: serif;}
.classique{background-color:black;color:white;font-family:times new roman; xx: serif;}
.nature{background-color:palegreen;color:saddlebrown;font-family: cursive;}
.pastel{background-color:mistyrose;color:olivedrab;font-family: courier;}
.altarastar{background-color:darkslateblue;color:aliceblue;font-family: courier; xx:monospace;}
.unwindzone{background-color:midnightblue;color:thistle;font-family:Arial; xx: sans-serif; }
.chillzone{background-color:black;color:powderblue;font-family: courier; xx:monospace;}
.retrozone{background-color:saddlebrown;color:aliceblue;font-family: cursive;} 
 







</style> 
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
</head>
<body id='bd1' style='xxtransform:scale(1.4);padding:6px;font-size:100%;xfont-family:Times New Roman;xcolor:white;xbackground-color:#efefea;' class='test1'>
<div id='dvscript'></div>
<div id='dvscore'></div>
<div id='dvstat'></div>
<center>
<dialog id='dlg1' style='xbackground-color:#685858 margin-top:0px;width:98%;' class='test1'>
  <button autofocus style='margin-bottom:10px;'   onclick='dlg1cls();'>Close</button>
  <pre id='prdlg1'></pre>
</dialog>
</center>

<center>
<span style='font-size:70%;'><b>github.com/ianlow27/CourseMakerHTML</b> 0.0.18_250204-1604</span><br/>
<textarea id='tx1' style='display:none;width:95%;height:100px;'></textarea>

<i><span id='h6part' tabindex='0' style='text-decoration:italic;font-weight:bold;font-size:108%;'></span></i>
<br/><span id='h3part' style='font-weight:bold;font-size:128%;'></span> <!-- !! -->
<br/><span id='h1part' style='font-weight:normal;font-size:100%;'></span> <!-- !! -->
</center>
<br/><button id='btn1' style='display:none;' onclick='gencourse();'>Begin</button>
<div id='dv1' style='font-weight:normal;'>Loading...</div>
<script>
//=========================================
//=========================================
//=========================================
//=========================================
//=========================================
//=========================================
//=============================.============
//alert(11111);
let currsect=1;
let maxsect=1;
let currsectname='';
let currpart=1;
let currpartname='';
let currqst=0;
let totparts=0;
let totsects=0;
let bshow_en=true;
let remtries=10;
//alert(sprintf0d(2, currpart));
//if(localStorage.getItem(appref+'tx1')==null){
//  localStorage.setItem(appref+'tx1', eval('part'+sprintf0d(2,currpart)) );
//}
//---------------------------
//!!
function seturlparms(){
try{
  const srchprms = new URLSearchParams(document.location.search);
  const gotoref=srchprms.get('goto');
  if(gotoref){
    //alert(gotoref);
    const atmp1=gotoref.split(/\-/);
    if(typeof atmp1[2] != 'undefined'){
      currsect=Number(atmp1[0]);     
      currpart=Number(atmp1[1]);
      currqst=Number(atmp1[2]);
      maxsect=currsect;
      sectionfldr=anum2sect[currsect];
      //dbgx(sectionfldr);
      savecurrpos();
    }
  }
}catch(e){
  alert(e.message);
}
}

//alert(eval('part'+'01'));
tx1=document.getElementById('tx1');tx1.value='';
dv1=document.getElementById('dv1');
h1part=document.getElementById('h1part'); //!!
h6part=document.getElementById('h6part'); //!!
h3part=document.getElementById('h3part'); //!!
btn1=document.getElementById('btn1');
dvstat=document.getElementById('dvstat');
bd1=document.getElementById('bd1');
dvscript=document.getElementById('dvscript');
dvscore=document.getElementById('dvscore');
dlg1=document.getElementById('dlg1');
prdlg1=document.getElementById('prdlg1');
//localStorage.getItem(appref+'tx1');
let alines1 = Array(); //tx1.value.split(/\n/);
let alines = Array();

//dlg1.className='test2';
//bd1.className='test2';
settheme();
//=============================
function loadjsxx(jsfile, onloadfunc){
  //prevpartid=currpartid;
  //currpartid++;
dbg(jsfile);
    const scriptobj = document.createElement('script');
    scriptobj.src = jsfile;
    scriptobj.id='currlib';
    scriptobj.onload = onloadfunc;
    scriptobj.onreadystatechange = onloadfunc;
    document.body.appendChild(scriptobj);
}//;//endfunc

function loadjs(psectionfldr, pcurrpart){
//dbg(jsfile);
  const jsfile='./'+coursefldr+'/'+psectionfldr+'/part'+sprintf0d(2,pcurrpart)+'.js';
  //const jsid='scr_'+psectionfldr+'_'+pcurrpart;
  loadjsfile(jsfile); //, jsid);
}//endfunc

function loadjsfile(jsfile){
    const scriptobj=document.createElement('script');
 //alert(jsfile);
    scriptobj.src = jsfile;
    scriptobj.id='src_'+(jsfile.replace(/\./g,'').replace(/\//g,'_'));
    scriptobj.onload = loadedjs2;
    scriptobj.onreadystatechange = loadedjs2;
    dvscript.appendChild(scriptobj);
}//;//endfunc
//---------------
function unloadjs(psectionfldr, pcurrpart){
dbg(101);
try{
  dvscript.innerHTML="";
  /*
const parent = document.getElementById("dvscript");
const child = document.getElementById('scr_'+psectionfldr+'_'+pcurrpart);
const throwawayNode = parent.removeChild(child);
*/


  //if(child.parentNode){
   // child.parentNode.removeChild(child);
  //}
  /*
  let prevpart=document.getElementById('scr_'+psectionfldr+'_'+pcurrpart);
  //const parent1=prevpart.parentNode;
  //parent1.removeChild(prevpart);
  delete prevpart;
  */
}catch(e){
  dbg('>>e1:'+e.message);
}
}//endfunc
//-----------------------------------
let loadedjs=function(){

try{
dbg(totparts,currpart);
  totparts=currpart; 
  if(eval('part'+sprintf0d(2,currpart+1))!=''){
    totparts= currpart+1;
  }
  //alert(loadedtest1());
 // if(!currqst) currqst=startqst;
//alert(1+'____'+currpart);
//try{
  
  if(!currqst){
//alert(2);
    showlandingpg();
  }else {
//alert('121>>Loaded!!!');
    gencourse();//<===!!!!!!!!!!!!!
  }
  
}catch(e){
  dbg('>>e2:'+e.message);
}


};//endfunc
//=============================
loadjsfile(coursefile); 
if(!bdbgmode){
dvstat.style.display='none';
dvscore.style.display='none';
}
setTimeout('loadsection()',500);
//--------------------------------------
function loadfiles(){
try{
  sections1(); 
  totparts=asectparts[sectionfldr];
 // dbgx(totparts);
  for(let i=1; i<=totparts; i++){
    loadjs(sectionfldr+'', i);
  }
  setTimeout('checkjs()',800);
}catch(e){
  dbg(e.message);
}
}//endfunc
//--------------------------------------
function loadedjs2(){
  if(!currqst){
    showlandingpg();
  }else {
    gencourse();//<===!!!!!!!!!!!!!
  }
}//endfunc
//=============================
//=============================
function gencourse(){
//tx1.value='jhfgg'; //eval('part'+sprintf0d(2, currpart)); 
try{
 dbg(144);
  if(!initgencourse()) return; 
  tx1.style.display='none';
  btn1.style.display='none';
  dbg(146);
  let strout='';
 
  for(i in alines){
    let qststr="";
    let ansstr='';
    let ansidstr='';
    let functype='';
    const i1 = Number(i)+1;
    if(currqst > alines.length){
      //alert('End of part');
      functype='endcourse';
      strout='<h2>End of Part</h2>';
      strout+=  "<br/><button id='btnbk' onclick='goback();'>Back</button>&emsp;&emsp;";
      break;
    }
    if(i1 > currqst) break;
    if(i1 < currqst) continue;
    alines[i] = alines[i].replace(/^[\s\*\-\_\=]+/g, "");
    const aqst=alines[i].split(/\|/);
//alert(aqst.length);
    let asel=Array();
    if(typeof aqst[1] != 'undefined') 
      asel=aqst[1]
        .replace(/\'/g, '```')
        .split(/\[/);
    const aqst1=aqst[0].split(/%%%/);
    aqst[0]=aqst1[0];
    if(aqst.length < 2){
      //alert(776);
      functype="info";
      //qststr=aqst[0];
      //alert(1);
    }else if(aqst.length == 2){
 //alert(fllblnkvals);
      const afllblnkvals = fllblnkvals.split(/\|/);
      functype="fillblanks";
      for(j in asel){
  //alert(j+'____ '+asel[j]);
        let aqst_j_ ='';
        if(asel[j].match(/\]/)){
          const atmp1=asel[j].split(/\]/);
          if(ansstr!="") ansstr+="|";
          ansstr+=atmp1[0];//.replace(/```/g, "'");
          if(ansidstr!="") ansidstr+="|";
          ansidstr+='ans'+i1+'_'+j;
          qststr+="<input id='"+'ans'+i1+'_'+j+ "' style='width:50px' value=\""+(  (typeof afllblnkvals[j-1] != 'undefined') ? afllblnkvals[j-1] : ''      )+"\"></input>"+atmp1[1].replace(/```/g, "'");
    //alert('1___'+qststr);
        }else {
          qststr+=asel[j].replace(/```/g, "'");
        }
        //alert(qststr)
       // qststr+="</input>"+asel[j];
      }//endfor
      //alert('1__'+qststr);
      //alert('2__'+ansstr);
      //alert('3__'+ansidstr);
    //---------------------------------
    }else if(  (aqst.length == 4) && (aqst[1].match(/[0-9]+/) )  ){
      functype="vocabwrite";
      //alert('write article');
      qststr+="<input id='minchrs' type='hidden' value='"+aqst[1]+"' />";      
      qststr+="<input id='exclwrds' type='hidden' value='"+aqst[2]+"' />";
      //const ainclwds=aqst[3].split(/ /);
      let inclwds=aqst[3].replace(/(=[a-zA-Z_\-]*)/ig, '');
      qststr+="<input id='inclwrds' type='hidden' value='"+inclwds+"' />";      
      qststr+="<div style='font-size:80%;color:red;'><b>Disallowed words:</b> "+aqst[2]+"</div>"
      +"<div style='font-size:80%;color:green;'><b>Required words:</b> "+aqst[3]+"</div>"
      +"<div style='font-size:80%;color:darkslategray;'><b>Minimum chars:</b> "+aqst[1]+"</div>"
+"<textarea id='txtvcbwrite"+currref()+"' style='width:95%;height:100px;'>"+fllblnkvals+"</textarea>";
//alert(fllblnkvals);
      //setTimeout('poptxtvcbwrite(currref());', 800);
    //---------------------------------     
    }else {

      let itype='radio';
      let countsel=0
      let countslsh=0;
      const afllblnkvals = fllblnkvals.split(/\|/);
      functype="fillblanks";
      for(let j=1; j<aqst.length; j++){
        if(aqst[j].match(/\]/)) countsel++;
        if(aqst[j].match(/%%/)) countslsh++;
      }//endfor
      if((aqst.length - countsel ==1) && (aqst.length - countslsh ==1))  itype='text';
      else if(countsel>1) itype='checkbox';
      //alert(itype);
      for(let j=1; j<aqst.length; j++){
 
        functype="multiselect";
        if(ansstr!="") ansstr+="|";
        if(aqst[j].match(/\]/)){
          ansstr+="true";
        }else{
          ansstr+="false";
        }
        let qstidx=0;
        if(itype=='checkbox') qstidx=j;
        const atmp1=aqst[j].split(/%%%/);
        if(ansidstr!="") ansidstr+="|";
        ansidstr+='ans'+i1+'_'+j;
        
        if(itype=='text'){
          functype="multitext";
          const atmp1b=atmp1[0].split(/%%/);
          qststr+=
           atmp1b[0]+
  "<br/><input type='"+itype+"' id='"+'ans'+i1+'_'+j+ "' name='"+
            atmp1b[1].replace(/[\[\]]/g,'')
            +"' style='width:90%;' value='"+(  (typeof afllblnkvals[j-1] != 'undefined') ? afllblnkvals[j-1] : '' )+"'/>"+
             "</label><br/>"; 

        }else {
        const aqst_qstidx_ = 1;
          qststr+="<input type='"+itype+"' id='"+'ans'+i1+'_'+j+ "' name='"+aqst_qstidx_+"' style='width:50px'/>"+
             atmp1[0].replace(/[\[\]]/g,'')+
             "</label><br/>";
 
        }
      }//endfor
    }//endif

//🏠	🏡  ▶	⏭	⏯	◀  ⏮	
    let btnstr='Submit';
    if(functype=='info') btnstr='▶'; lngcontinue;
    if(functype=='endcourse') btnstr='Finish';
    const bk2lndpg =
       "<button id='btnbk2lndpg' onclick='showlandingpg();'>🏠</button>&emsp;&emsp;";
    const toprvprt = (functype!='info') ? "" :
       "<button id='btn2prvprt' onclick='startsection(sectionfldr,((currpart-1 <=0)?1:currpart-1),1);'>⏮</button>&emsp;&emsp;";
       
    const tonxtprt = ( (functype!='info') || (currsect >= maxsect) ) ? "" :
       "<button id='btn2prvprt' onclick='startsection(sectionfldr,((currpart+1>=totparts)?totparts:currpart+1),1);'>⏭</button>&emsp;&emsp;";
       
    const bckstr =
       "<button id='btnbk' onclick='goback(\""+functype+"\",\""+ansidstr+"\");'>◀</button>&emsp;&emsp;";


  let submitstr= '<button id="qbtn'+i1+'"   onclick="procans(\\"' + functype 
        + '\\",\\"'+ansstr
        +'\\",\\"'+ansidstr
        +'\\",\\"'
        +( (typeof aqst1[1]!='undefined')
          ? aqst1[1] : '' ) 
        +'\\",\\"'
        +( (typeof aqst1[2]!='undefined')
        ? aqst1[2] : '' ) 
      +'\\");">'+btnstr+"</button>&emsp;&emsp;";
submitstr =    "<button id='qbtn"+i1+"' onclick='procans(\"" + functype 
        + "\",\""+ansstr
        +"\",\""+ansidstr
        +"\",\""
        +( (typeof aqst1[1]!='undefined')
          ? aqst1[1] : '' ) 
        +"\",\""
        +( (typeof aqst1[2]!='undefined')
        ? aqst1[2] : '' ) 
      +"\");'>"+btnstr+"</button>&emsp;&emsp;";
//alert(submitstr);

    strout+= //!!
      "<div id='qst"+i1+"' style='display:none;'>"+
      //i1 +"/"+alines.length + " "+
     
      //----------------------!!
      fmtstr(aqst[0])
         + "<br/>" +
      fmtstr(qststr)+ "<br/>"+
      //----------------------!!
      '<center>'+
      bk2lndpg +
      toprvprt +
      bckstr +
      submitstr +
     /*  "<button id='qbtn"+i1+"' onclick='procans(\"" + functype 
        + "\",\""+ansstr
        +"\",\""+ansidstr
        +"\",\""
        +( (typeof aqst1[1]!='undefined')
          ? aqst1[1] : '' ) 
        +"\",\""
        +( (typeof aqst1[2]!='undefined')
        ? aqst1[2] : '' ) 
      +"\");'>"+btnstr+"</button>&emsp;&emsp;"+
   */  
       tonxtprt +
          
        ( ( functype != 'info'   )   ? "<span>"+remtries+" tries</span>"  :  '')+  
          
          "<br/><br/><button id='btnbk' onclick='chngfntsz(\"decrease\");'>Aa--</button>&emsp;&emsp;"+
         
         "<button id='btnbk' onclick='chngfntsz(\"100%\");'>Aa100%</button>&emsp;&emsp;"+
         
          "<button id='btnbk' onclick='chngfntsz(\"increase\");'>Aa++</button>&emsp;&emsp;"+
              "<span id='spfntsz'></span>&emsp;&emsp;"+
          "<br/><br/>"+
          "<button id='btnnvl' onclick='showsttngs();'>⚙️ Settings</button>&emsp;&emsp;"+      
    "<button id='btnnvl' onclick='showwrtngs();'>Your writings</button>&emsp;&emsp;"+
   '</center>'+
      "</div>"+
       "" ; 
  }//endfor
  //alert(appref);
  if(b_en_btn){
    strout="<button id='bt_en' style='visibility:"+(!bshow_en ? 'hidden' : 'visible' )+"' onclick='showtrans();'>EN</button>"
  +strout;
  }
  //alert(dv1);
  strout+="<br/><br/><br/><br/><br/><br/><br/>";
  dv1.innerHTML=strout;
  pgmode='lesson';

  setTimeout("postgencourse();", 800);

}catch(e){
  dbg('>>e3:'+e.message);
}

}//endfunc
//--------------------------------------
function postgencourse(){
try{
const qstcurr = document.getElementById('qst'+currqst);
  if(typeof qstcurr != 'undefined'){
    qstcurr.style.display='block';
  }
  chngfntsz();
  h6part.focus();
}catch(e){
  dbg('>>e3:'+e.message);
}

}//endfunc
//--------------------------------------
function procans(ptype, pans, 
pansid, pcrrctmsg='', pincrrmsg=''){
//alert(9754);
  let redirstr='';
  let bnextq = true;
try{
//dbgx(ptype);
if(ptype=='info'){
  //alert(256);
   incrlevel(); //currqst++;
}else {
 // alert(pans);
  //alert(pansid);
  //---------------------------
  // VOCABWRITE
  if(ptype=='vocabwrite'){
    const exclwrds = document.querySelector('#exclwrds');
    const inclwrds = document.querySelector('#inclwrds');
    const minchrs = document.querySelector('#minchrs');
    const txtvcbwrite = document.querySelector('#txtvcbwrite'+currref());
    txtvcbwrite.value = cnvinpt2acnts(txtvcbwrite.value);
    fllblnkvals=txtvcbwrite.value.trim();
//dbgx(txtvcbwrite.value);
/*
    localStorage.setItem(appref+'txtvcbwrite'+currref(), txtvcbwrite.value);
*/
    let aexcl=Array();
    let aincl=Array();
    let bok=true;
    //alert(3);
   if(fllblnkvals!='``pass'){
    if (exclwrds) {
	  aexcl =exclwrds.value.split(/\s/);
	  for(let i in aexcl){
		let rgx1='';
		aexcl[i]=aexcl[i].replace(/\^/g, "\\^");
		if(aexcl[i].substr(0,1)=='['){
	      rgx1=new RegExp(aexcl[i], 'ig');
	    }else{
	      rgx1=new RegExp('\\b'+aexcl[i]+'\\b', 'ig');
		}
		//alert(aexcl[i]);
		if(String(txtvcbwrite.value).match(rgx1)){
			alert(aexcl[i]+' found!!');
			bok=false;
			break;
	    }
      }
    }
    if( (inclwrds) && (bok)){
      aincl =inclwrds.value.split(/\s/);
	  for(let i in aincl){
    	aincl[i]=aincl[i].replace(/\^/g, "\\^");
        let rgx1=new RegExp('\\b'+aincl[i]+'\\b', 'ig');
		//alert(aexcl[i]);
		if(!String(txtvcbwrite.value).match(rgx1)){
			alert(aincl[i]+' missing!!');
			bok=false;
			break;
	    }
      }
    }
    if( (minchrs) && (bok)){
	  if(txtvcbwrite.value.length < minchrs.value){
		alert('insufficient chars: '+txtvcbwrite.value.length);
	    bok=false;
      }
    }
    //alert(4);
    if(!bok){
      bnextq=false;
    }
   }//endif
    
  //---------------------------
  }else{
    const aansid=pansid.split(/\|/);
    const aans=pans.replace(/```/g,"'").split(/\|/);
    //let bnextq = true;
    gmtotqstn++;
 //alert(pans);
    fllblnkvals='';
    for(i in aansid){
      const obj = document.getElementById(aansid[i]);
      if(ptype=="fillblanks"){
        
        // FILLBLANKS
        if(fllblnkvals!='') fllblnkvals+='|';
        fllblnkvals+=obj.value.trim();
        if(obj.value.trim()=='``pass') break;
     obj.value=cnvinpt2acnts(obj.value);
  //alert(obj.value);
        if(obj.value.trim().toLowerCase()  != aans[i].trim().toLowerCase() ){
          if(obj.value.trim())
            alert("'"+obj.value+"' is incorrect!");
          bnextq = false;
        }
      }else if(ptype=="multiselect"){
      // MULTISELECT
        if(String(obj.checked) != String(aans[i])){
           bnextq = false; 
        }
      }else if(ptype=="multitext"){      
        if(fllblnkvals!='') fllblnkvals+='|';
        fllblnkvals+=obj.value.trim(); 
        if(obj.value.trim()=='``pass') break;
        //alert('here___'+ptype);
        /*   alert(ptype+'__'+pans+
              '_'+pansid+'_'+pcrrctmsg+
              '_'+ pincrrmsg);  */
obj.value = cnvinpt2acnts(obj.value);

        if(obj.name.toLowerCase().trim()!=obj.value.toLowerCase().trim()){
            if(obj.value.trim())
            alert("'"+obj.value+"' is incorrect!");
             bnextq = false; 
         }
      }
    }//endfor
  }//endif
//alert(fllblnkvals);
  //---------------------------
  let strmsg='';
//alert(5);
  if(remtries<=0){
    remtries=0;
  }
  if((bnextq)||(!remtries)){
    if(bnextq)
         strmsg+= outemoji('quizcorrect') + "";
    else strmsg+= outemoji('quizexptries') + "";
    fllblnkvals='';
    //alert(6);
    if(pcrrctmsg.trim()){
      const atmp2=pcrrctmsg.split(/#/);
      strmsg+=atmp2[0]+'\n';
      for(let i in atmp2){
        if(atmp2[i].match(/\+/)){
          if(atmp2[i].substr(0,10)
             =='currmoney+'){
             currmoney+=Number(
               atmp2[i].substr(10));
          }else if(atmp2[i].substr(0,10)
             =='currscore+'){
             currscore+=Number(
               atmp2[i].substr(10));
          }
        }
      }//endfor
    }//endif
    //alert(7);
    if(ptype=='vocabwrite'){
    //alert(1);
    try{
      const txtvcbwrite = document.querySelector('#txtvcbwrite'+currref());
      let wrtngs=localStorage.getItem(appref+"showwrtngs");
      if(!wrtngs) wrtngs='';
      localStorage.setItem(appref+"showwrtngs",
           "<div style='text-align:left;'><hr/>"+Date().toString()+'\n'+
           txtvcbwrite.value.replace(/\n/g,"\n") +'</div>'+ wrtngs.substr(0, 1000 +(0*1000 *100 *8)).replace(/<\/div>(^<\/div>)+$/,'</div>') );
      }catch(e){
      alert(e.message);
      }
    }
    //alert(2);
    gmtotrght++; dbg('CORRECTANS');
    const msg1 = incrlevel(); //currqst++; //!!
    remtries=10;
    msgout(strmsg + '<br/>'+msg1);
  }else {
    remtries--;
    strmsg+= outemoji('quizincorrect') + "";

    if(pincrrmsg.trim()){
      const atmp2=pincrrmsg.split(/#/);
      strmsg+=atmp2[0];
      for(let i in atmp2){
        //alert(atmp2[i]);
        if(atmp2[i].match(/\-/)){
          if(atmp2[i].substr(0,10)
             =='currmoney-'){
             currmoney-=Number(
               atmp2[i].substr(10));
          }else if(atmp2[i].substr(0,10)
             =='currscore-'){
             currscore-=Number(
               atmp2[i].substr(10));
          }
        }else if(atmp2[i].substr(0,6)=='redir='){
          redirstr=atmp2[i].substr(6);
        }
      }//endfor
    }//endif 
    gmtotwrng++; dbg('INCORRECTANS');
    msgout(strmsg);
  }//endif bnextq
}//endif
}catch(e){
  dbg('>>e4:'+e.message);
}
  if(redirstr){
    const aredir=redirstr.split(/\^/);
    startsection(aredir[0],
       Number(aredir[1]),
       Number(aredir[2]));
  }
  setTimeout('gencourse()', 0);
}//endfunc
//--------------------------------------
function goback(ptype='', pdata=''){ //!!
//alert(ptype+"___"+pdata);
if((ptype=='fillblanks')||(ptype=='multitext')){
  let fbans='';
  const atmp1=pdata.split(/\|/);
  for(let i in atmp1){
    if(fbans!='') fbans+='|';
    const obj1=document.getElementById(atmp1[i]);
    fbans+=obj1.value;
  }//endfor
  //localStorage.setItem(appref+'fbans', fbans);
  //alert(fbans);
  fllblnkvals = fbans;
}else if(ptype == 'vocabwrite'){
  const txtvcbwrite = document.querySelector('#txtvcbwrite'+currref());
  fllblnkvals=txtvcbwrite.value;
  //alert(fllblnkvals);
}//endif
let outcome='gencourse';
  currqst--;
  if(!currqst){
    currqst=1;
    currpart--;
    if(!currpart){
      currpart=1;
      outcome='showlandingpg';
    }
  }
  savecurrpos();
  eval(outcome+'();');
}//endfunc
//---------------------
function incrlevel(ptype='qst'){ //!!
let retstr='';
let outcome='';
  if(ptype=='qst'){
    currqst++;
    if(currqst>(alines.length)){
retstr += outemoji('endofpart') ;
      currpart++;
      currqst=1;
      if(currpart > asectparts[sectionfldr]){ //otparts){
        if((currsect==maxsect) 
          &&(maxsect<=totsects)){
retstr += outemoji('endofsection');
          currsect++;
          maxsect++;
          if(maxsect > totsects){
retstr += outemoji('endofcourse'); 
          }
        }
     //alert('end of section 2');
dbgx('SHOWLANDINGPG');
        //showlandingpg();
        outcome='showlandingpg';
        //alert('end of course');
      }else{
dbgx('GENCOURSE');
//loadsection();
        outcome='gencourse';
      }
    }
  }else{
  }
  
savecurrpos();
if(outcome) eval(outcome+'();');
return retstr;
}//endfunc
//---------------------
function sprintf0d(pwidth=2, pval=0){ //!!
  if(pwidth>10) pwidth=10;
  if(isNaN(pval)) pval=0;
  if(pval<0) pval=0;
  pbase='1';
  for(let i=0; i<(pwidth-1); i++){
    pbase+='0';
  }
  const retval = (String(pbase).length - String(pval).length) + 1;
  return retval > 0 ? 
       new Array(retval).join('0') + pval :
       pval;
}
//--------------------------------------
function initgencourse(){ //!!


updscores(currsteps+1);
dbg('386>>part'+sprintf0d(2, currpart));
tx1.value=eval('part'+sprintf0d(2, currpart));
//currqst=1;
alines1 = tx1.value.split(/\n/);
alines = Array();
dbg('391>>'+tx1.value);
for(i in alines1){
//dbg(alines1[i]);
  alines1[i]=alines1[i].trim();
  if(alines1[i]==""){
  }else if((alines1[i].substr(0,1)=="{")
     && (alines1[i].substr(alines1[i].length-1,1)=='}')){
    //coursename =alines1[i].substr(1,alines1[i].length-2);
  }else if((alines1[i].substr(0,2)=="/*") && (alines1[i].substr(alines1[i].length-2,2)=='*/')){
       //dbg('___111'+alines1[i].substr(alines1[i].length-2,2));
    //do nothing ignore comment
  }else if((alines1[i].substr(0,1)=="[")
     && (alines1[i].substr(alines1[i].length-1,1)==']')){
    currpartname =alines1[i].substr(1,alines1[i].length-2);
  }else{
    alines.push(alines1[i]);
  }
}//endfor

h6part.innerHTML=coursename;

if(typeof asections[sectionfldr] != 'undefined')
h3part.innerHTML='Section ' + asections[sectionfldr];

h1part.innerHTML='Part '+currpart 
+(currpartname!=''? ': '+currpartname : '')+prg1()
+ '<br/><b><u>Section '+currsect+' - Part '+currpart+': Module '+currqst+' (of '+alines.length +')</u></b>'
;



try{
//dbgx('882___'+totparts);

/*
let ltotparts=0;
for(i=1; i<=10; i++){
  if(typeof eval('part'+sprintf0d(2,i)) =='undefined'){ 
//dbgx('----1',i);
  break;
  }else if(String(eval('part'+sprintf0d(2,i))).trim()==''){ 
    //dbg('part'+sprintf0d(2,i));
//dbgx('----2',i);
break;
  }else {
    //alert('['+eval('part'+sprintf0d(2,i)).trim()+']')
    ltotparts=i;
  }
}//endfor
//dbgx('897___'+totparts+'__'+ltotparts);
*/
//totparts=ltotparts;
//if(!totparts) totparts=1;
//dbg(currpart, totparts);
if(currpart > totparts){
  return 0;
}
//dbgx('totparts='+totparts);  
//====================================
//====================================
//====================================
if(!currqst){
  currqst=1;
  let strout='jjggg jhgffx jh';
  dv1.innerHTML=strout;
  return 0;
}
//====================================
//====================================
//====================================
}catch(e){
  dbg('>>e5:'+e.message);
}
return 1;
}//endfunc
//--------------------------------------
function checkjs(){
for(let i=1; i<=totparts; i++){
  if(String(eval('part'+sprintf0d(2,i))).trim()==''){ 
    alert("ERROR: missing or malformed './"+sectionfldr+"/part"+sprintf0d(2,i)+".js'");
  }//endif
}//endfor
}//endfunc
//--------------
//--------------------------------------
function showlandingpg(){
try{
 loadcurrpos();
 sections1();
setTimeout("shwlndpghdr();", 800);
  let strout='';
  const asects=sectionlist.split(/%%%/);
  //alert("'./"+coursefldr+"/cover.png'");
  strout+="<center><img src='./"+coursefldr+"/cover.png' style='width:98%'></img>";
  strout+='<table>';
  for(i in asects){
    const atmp1=asects[i].split(/\|/);
    if(strout!='') strout+='';
    strout+="<tr><td valign='top' width='99%'><b>"+atmp1[0]+':</b> '+atmp1[3]+ "</td><td valign='top'><button style='text-align:right;";
    // strout+='<b style="font-size:110%;">'+atmp1[0]+': </b>' + atmp1[3] +  "<div style='text-align:right;'><button style='text-align:right;";
    if(i < maxsect){
//alert('1__'+maxsect);
      //alert(1);
     strout+="'  onclick='startsection( \""+atmp1[1]+"\");'>";// , \""+atmp1[0]+"\");'>";
    }else {
//alert('2__'+maxsect);
      //alert(2);
      strout+="  color:#bbb;'>";
    }
    strout+='Start</button></td></tr>'; //</div>';
  }//endfor
  strout+='</table></center>';
//alert('1__'+maxsect+'__'+totsects);
  if((maxsect >= totsects)&&(totsects)){
    strout+="<button onclick='restart();'>"+lngrestart+"</button>";
  }

  //alert(strout);
  dv1.innerHTML=strout;
  pgmode='landing';
    //alert('end of section 4');
  return 0;
}catch(e){
  dbg('>>e6:'+e.message);
}

}//endfunc
//--------------------------------------
function startsection(psection,pcurrpart=1,pcurrqst=1){
dbg(psection);
try{
  //psection=Number(psection);
  //  pcurrpart=Number(pcurrpart);
  //  pcurrqst=Number(pcurrqst);
  unloadjs(sectionfldr, currpart);
  //alert(2);
  part01='';
  currqst=pcurrqst;
  currpart=pcurrpart;
  startqst=pcurrqst;
  sectionfldr=psection;
  totparts=asectparts[sectionfldr];
//alert(totparts);
  currsect=Number(sectionfldr.substr(0,1));
dbg(468);
  loadfiles();
}catch(e){
  dbg('>>e7:'+e.message);
}
}//endfunc
//--------------------------------------
function dbgx(pstr,pstr1='',pstr2='',) {
  const e = new Error();
  const regex = /^(.*)\((.*):(\d+):(\d+)\)$/
  const match = regex.exec(e.stack.split("\n")[2]);
  dbg(pstr,pstr1,pstr2,'x', '['+match[1].trim()+': l.'+match[3]+']\n');
}//endfunc
//--------------------------------------
function dbg(pstr,pstr1='',pstr2='',px='',linenum='') {
if(!linenum){
  const e = new Error();
  const regex = /^(.*)\((.*):(\d+):(\d+)\)$/
  const match = regex.exec(e.stack.split("\n")[2]);
  linenum=  '['+match[1].trim()+': l.'+match[3]+']\n';
}
  
  const msg =
   linenum
   +'coursefldr='+coursefldr+' ;'
   +'totsects='  +totsects +'; '
   +'totparts='  +totparts +'; \n'
   +'sectionfldr='  +sectionfldr +'; '
   +'asctpts[stnf]='+asectparts[sectionfldr]+'; '
   +'maxsect='      +maxsect +'; '
   +'currsect='  +currsect +'; '
   +'currpart='  +currpart +'; '
   +'currqst='   +currqst  +'; \n'
   +'gmtotqstn=' +gmtotqstn+'; '
   +'gmtotrght=' +gmtotrght+'; '
   +'gmtotwrng=' +gmtotwrng+'; '
   + "\n\n" + pstr + '___' + pstr1 ; 
  if(px){
    alert(msg);
  }else{
    dvstat.innerHTML = msg;
  }
  // ); 
}
//------------------
function updscores(pcurrsteps=null){
  //dbgx(pcurrsteps);💵
  if(pcurrsteps) currsteps=pcurrsteps;
  else currsteps++;
  let strout="<span style='background-color:#ffffca;'>"
  
     +lngtotqstn+'💯: '+gmtotqstn+ '|'
     +lngtotrght+'✅: '+gmtotrght+ '|'
     +lngtotwrng+'❌: '+gmtotwrng+ '|'
  
     +lngsteps+'👣: '+currsteps + '|'
     +lngstepsleft+'🎯: '+(Number(maxsteps) +Number(0-currsteps)) + '|'
     +lngcurrency+'🪙: '+lngcrncysym+currmoney + '|'
     +lngtotscore+'💯: '+currscore + '|</span>'
     ;
  dvscore.innerHTML=strout;

}//endfunc
//------------------
function msgout(pmsg){ 
  dlg1 = document.getElementById('dlg1');
  prdlg1.innerHTML = pmsg;
  dlg1.showModal();
 
}//endfunc
//------------------
function dlg1cls(){ 
  dlg1 = document.getElementById('dlg1');
  dlg1.close();
  //alert(theme);
  settheme(theme);
}//endfunc
//-----------------
function settheme(ptheme=''){
  if(ptheme){
  localStorage.setItem(appref+'theme', ptheme);
  }else {
    const ltheme=  localStorage.getItem(appref+'theme');
    if(ltheme) theme=ltheme;
  }
  bd1.className=theme;
  dlg1.className=theme;  
  prdlg1.className=theme;  
}//endfunc
//------------------
function showtrans(){
  bshow_en=false;
  loadjs(sectionfldr+'_en', currpart);
  setTimeout("bshow_en=true; loadjs(sectionfldr, currpart)",5000);
}
//------------------
function restart(){
if(prompt('Please enter y if you want to restart from the very beginning:') == 'y'){
  maxsect=1;
  currsect=1;
  currpart=1;
  currqst=1;
  savecurrpos();
  showlandingpg();
}
}//endfunc
//------------------
function initdata(){
lesson01='';lesson02='';lesson03='';lesson04='';lesson05='';lesson06='';lesson07='';lesson08='';lesson09='';
lesson10='';lesson11='';lesson12='';lesson13='';lesson14='';lesson15='';lesson16='';lesson17='';lesson18='';lesson19='';
lesson20='';lesson21='';lesson22='';lesson23='';lesson24='';lesson25='';lesson26='';lesson27='';lesson28='';lesson29='';
lesson30='';lesson31='';lesson32='';lesson33='';lesson34='';lesson35='';lesson36='';lesson37='';lesson38='';lesson39='';lesson40='';lesson41='';lesson42='';lesson43='';lesson44='';lesson45='';lesson46='';lesson47='';lesson48='';lesson49='';lesson50='';

part01='';part02='';part03='';part04='';part05='';part06='';part07='';part08='';part09='';
part10='';part11='';part12='';part13='';part14='';part15='';part16='';part17='';part18='';part19='';
part20='';part21='';part22='';part23='';part24='';part25='';part26='';part27='';part28='';part29='';
part30='';part31='';part32='';part33='';part34='';part35='';part36='';part37='';part38='';part39=''; part40='';part41='';part42='';part43='';part44='';part45='';part46='';part47='';part48='';part49='';part50='';

}//endfunc
//------------------
function loadsection(){
sections1();
seturlparms();
//dbgx(820+'__'+anum2sect[5]+'__'+currsect);
loadcurrpos();
if((currqst==1)&&(currpart==1))
  showlandingpg();
else
  loadfiles();
}//endfunc
//------------------
function savecurrpos(){
  localStorage.setItem(appref+'currpos',
    currsect+'-'+
    currpart+'-'+
    currqst+'-'+
    maxsect+'-'+
    sectionfldr);
}
//------------------
function loadcurrpos(){
  //dbgx(localStorage.getItem(appref+'currpos'));
  const atmp1=String(
    localStorage.getItem(appref+'currpos') )
    .split(/\-/);
if(typeof atmp1[4]!='undefined'){
  currsect=Number(atmp1[0]);
  currpart=Number(atmp1[1]);
  currqst=Number(atmp1[2]);
  maxsect=Number(atmp1[3]);
  sectionfldr=atmp1[4];
}
}//endfunc
//------------------
/*
function poptxtvcbwrite(pcurrref=''){
  //dbgx(pcurrref);
  const txtvcbwrite = document.querySelector('#txtvcbwrite'+pcurrref);
  if(txtvcbwrite){
    const valstr=localStorage.getItem(appref+'txtvcbwrite'+pcurrref);
    txtvcbwrite.value = (valstr ? valstr : '');
  }
}//endfunc
*/
//------------------
function shwlndpghdr(){
//alert(pgmode);
if(pgmode=='landing'){
  h6part.innerHTML=coursename; 
  h1part.innerHTML= coursedesc + prg1('showlandingpg'); 
  h3part.innerHTML='';
}
}//endfunc
//------------------
function currref(){
  const retval =currsect+'-'+currpart+'-'+currqst;
  //dbgx(retval);

return retval;
}//endfunc
//------------------
function prg1(popt=''){
let prg1="<div style='white-space:pre-wrap;xfont-size:70%;word-wrap:break-word;'>";
  //alert ( currsect +'______'+totsects+'\n'+currpart+'______'+totparts );
//----------------------------
for(let i=0; i<maxsect; i++){
  if(i > totsects-1) break;
  if( (i==(currsect - 1)) && (!popt)){
    prg1+="<span style='font-size:150%'>🟪</span>";
  }else{
    prg1+='🟪'; //🏅';
  }
}
for(let i=0; i<(totsects - maxsect); i++){
  prg1+='🟨'; //🟡';
}
if((popt=='showlandingpg')){//&&(pgmode=='landing')){
  prg1+='</div>';
  return prg1;
}
prg1+='<br/>';
//----------------------------
for(let i=0; i<currpart; i++){
  prg1+='🟦'; //🔵';
}
for(let i=0; i<(totparts - currpart); i++){

    prg1+='🟧';
}
prg1+='<div style="font-size:80%;">';
//-------------------------------------
for(let i=0; i<currqst; i++){
  prg1+='🟩';//🟢';
}
for(let i=0; i<alines.length - currqst; i++){
  prg1+='⬜'; //⬛'; //🟥';//🔴';
}
prg1+='</div></div>';
return prg1;
}//endfunc
//-------------------------------------
function chngfntsz(popt='init'){
let fntsz=localStorage.getItem(appref+'bd1fntsz');
let currfntsz= bd1.style.fontSize;
if(!fntsz) fntsz=currfntsz;

if(popt=='init'){
  //alert(fntsz);
  
}else if(popt=='100%'){
  fntsz='100%';

}else if(popt=='decrease'){
  let currval=Number(fntsz.replace(/%/g,''));
  currval=currval-2;
  if(currval < 70) currval = 70;
  fntsz=currval+'%';

}else{
  let currval=Number(fntsz.replace(/%/g,''));
  currval=currval+2;
  if(currval > 130) currval = 130;
  fntsz=currval+'%';
}
let spfntsz=document.getElementById('spfntsz');
if(spfntsz){
if(typeof spfntsz !='undefined'){
  spfntsz.innerHTML=fntsz;
}}

bd1.style.fontSize=fntsz;
localStorage.setItem(appref+'bd1fntsz',fntsz);

}//endfunc
//------------------
function outemoji(popt){
const fntsz='400%';
if(popt=='endofcourse'){    
  const  courseimg1='🥳';
  const  courseimg2='🏆';
  const acourseimg3=['🎊','🎆'];
  const  courseimg3 = 
     acourseimg3[getrandnum(acourseimg3.length)];
  return "<b>Congratulations!! You have completed this course!</b><br/><span style='font-size:"+fntsz+"'>"+
     courseimg1+courseimg2+courseimg3+"</span><br/>";  
  

}else if(popt=='endofsection'){    
  const  sectimg1='🥳';
  const  sectimg2='🏅';
  const asectimg3=['🎉','🎇'];
  const  sectimg3 = 
     asectimg3[getrandnum(asectimg3.length)];
  return "Congratulations! You have completed <br/><b>Section "+(currsect)+"!</b><br/><span style='font-size:"+fntsz+"'>"+
     sectimg1+sectimg2+sectimg3+"</span><br/>";  
  
  
}else if(popt=='endofpart'){    
  const apartimg1=['🤩','😎','😃'];
  const apartimg2=['✨','🌟','🌟'];
  const  partimg1 = 
     apartimg1[getrandnum(apartimg1.length)];
  const  partimg2 = 
     apartimg2[getrandnum(apartimg2.length)];
  return "Congratulations! You have completed <br/><b>Part "+(currpart)+" of Section "+(currsect)+"!</b><br/><span style='font-size:"+fntsz+"'>"+
     partimg1+partimg2+"</span><br/>";  

}else if(popt=='quizcorrect'){    
  const aquizimg1=['😀','😄','😊','😁','😃'];
  const aquizimg2=['💫','👍','👌'];
  const  quizimg1 = 
     aquizimg1[getrandnum(aquizimg1.length)];
  const  quizimg2 = 
     aquizimg2[getrandnum(aquizimg2.length)];
  return "Well done! Your answer was <b>correct!</b>  <br/><span style='font-size:"+fntsz+"'>"+
     quizimg1+quizimg2+"</span><br/>";
     
     
}else if(popt=='quizexptries'){    
  const aquizimg1=['😀','😄','😊','😉'];
  const aquizimg2=['💫','👍','👌'];
  const  quizimg1 = 
     aquizimg1[getrandnum(aquizimg1.length)];
  const  quizimg2 = 
     aquizimg2[getrandnum(aquizimg2.length)];
  return "Good effort! Your retries have <b>used up.</b> We will now move on.<br/><span style='font-size:"+fntsz+"'>"+
     quizimg1+quizimg2+"</span><br/>";
     
     
}else if(popt=='quizincorrect'){    
/*🏋️‍♂️🍦🍨🍪🍫🍰🧁⊛🍩☕🥛🍹🥤⛵🛶🎁🎀🏀🎾🏓

🦸🦸‍♀️



['💪','🏃','🏃‍♂️','🏃‍♀️','💃','🕺','🧗','🧗‍♂️','🧗‍♀️','🏇','🏂','🏄','🏄‍♂️','🏄‍♀️','🚣','🚣‍♂️','🚣‍♀️','⛹','⛹️‍♂️','⛹️‍♀️','🏋','🏋️‍♂️','🏋️‍♀️','🚴','🚴‍♂️','🚴‍♀️','🚵','🚵‍♂️','🚵‍♀️','🤾','🤾‍♂️','🤾‍♀️']	

*/
  const  icrrimg1='🙂';
  const aicrrimg2=['💪','🏃','🏃‍♂️','🏃‍♀️','🧗','🧗‍♂️','🧗‍♀️','🏇','🏂','🏄','🏄‍♂️','🏄‍♀️','🚣','🚣‍♂️','🚣‍♀️','⛹','⛹️‍♂️','⛹️‍♀️','🏋','🏋️‍♂️','🏋️‍♀️','🚴','🚴‍♂️','🚴‍♀️','🚵','🚵‍♂️','🚵‍♀️','🤾','🤾‍♂️','🤾‍♀️'];

//['💪','🚀','🏋️‍♂️','🍦','🍨','🍪','🍫','🍰','??','⊛','🍩','☕','🥛','🍹','🥤','⛵','🛶','🎁','🎀','🏀','🎾','🏓'];
  const  icrrimg2 = 
     aicrrimg2[getrandnum(aicrrimg2.length)];
  return "Good effort! Your answer was incorrect. Try again.<br/><span style='font-size:"+fntsz+"'>"+
     icrrimg1+icrrimg2+"</span><br/>"
/* +"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1"
+"<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1" */
;
}//endif
}//endfunc
//------------------
function getrandnum(pmax) {
  return Math.floor(Math.random() * pmax);
}//endfunc

// + "Describe your holiday|200|i [jkqxz] thou he she it we they you|fi ti ef hi ni chi nhw\n"
//------------------
function showwrtngs(){
let wrtngs=localStorage.getItem(appref+"showwrtngs");
if (!wrtngs) wrtngs='Your writings will display here after your first writing exercise...';
msgout(wrtngs +  "<hr/><b>Entries are deleted if they get beyond a certain volume. Please select, copy, paste, and save this entire page into an external file.</b>");
}//endfunc
//alert(8888);
//--------------------
function cnvinpt2acnts(pstr){
//return pstr;
return String(pstr)
.replace(/a\/u\b/g, 'áu')
.replace(/a\^/g, 'â')
.replace(/e\^/g, 'ê')
.replace(/i\^/g, 'î')
.replace(/o\^/g, 'ô')
.replace(/u\^/g, 'û')
.replace(/w\^/g, 'ŵ')
.replace(/y\^/g, 'ŷ')
.replace(/(\w)a%(\w)/g, '$1ä$2')
.replace(/(\w)e%(\w)/g, '$1ë$2')
.replace(/(\w)i%(\w)/g, '$1ï$2')
.replace(/(\w)o%(\w)/g, '$1ö$2')
.replace(/(\w)u%(\w)/g, '$1ü$2')
.replace(/(\w)w%(\w)/g, '$1ẅ$2')
.replace(/(\w)y%(\w)/g, '$1ÿ$2')
.replace(/(\w)a`(\w)/g, '$1à$2')
//.replace(/(\w)eh(\w)/g, '$1ë$2')
//.replace(/(\w)ih(\w)/g, '$1ï$2')
//.replace(/(\w)oh(\w)/g, '$1ö$2')
//.replace(/(\w)uh(\w)/g, '$1ü$2')
//.replace(/(\w)wh(\w)/g, '$1ẅ$2')
.replace(/(\w)y`(\w)/g, '$1ỳ$2')
;
//alert(obj.value);
}//endfunc
//------------------
function fmtstr(pstr){
//return pstr;
//console.log('1__'+pstr);
  const outstr=String(pstr)
    .replace(/⁽/g, '<b><u>')
    .replace(/⁾/g, '</u></b>')
         .replace(/##(\d+)/g, currpart+'.'+currqst+'.'+"$1 ")
         .replace(/##(\s+)/g, currpart+'.'+currqst+''+"$1")
         .replace(/''([\w\-\s\.\-_]+)''/g, "<i>$1</i>")
         .replace(/\{\{/g, '<b>')
         .replace(/\}\}/g, '</b>')
         .replace(/\(\(/g, '<u>')
         .replace(/\)\)/g, '</u>')
         .replace(/\[\[/g, '<i>')
         .replace(/\]\]/g, '</i>')
         .replace(/>>>/g, '<br/><br/>')
         .replace(/>>/g, '<br/>')
         .replace(/\{([a-z0-9\-_]+)\.mp4\}/g, "<video controls width='96%' controlslist='nofullscreen nodownload noremoteplayback noplaybackrate foobar' ><source src='./"+coursefldr+"/"+sectionfldr+"/$1.mp4' type='video/mp4' ></video>")
     .replace(/\{([a-z0-9\-_]+)\.(png|gif|jpg)\}/g, "<center><img style='max-width:96%;max-height:150px;xtext-alignment:center;' src='./"+coursefldr+"/"+sectionfldr+"/$1.$2'  ></img></center>")
     .replace(/\{([a-z0-9\-_]+)\.(mp3|m4a)\}/g, 
"<audio controls controlslist='nofullscreen nodownload noremoteplayback noplaybackrate foobar' ><source src='./"+coursefldr+"/"+sectionfldr+"/$1.$2' type='audio/mpeg' ></audio>")
  ;
  //console.log('2__'+outstr);
  
  return outstr;
}//endfunc
//--------------------------------------
function showsttngs(){
const lthemes="safari sahara spacepod funkypop arty cafe classic classique nature pastel altarastar unwindzone chillzone retrozone";
const atmp1=lthemes.split(/ /);
let msgstr='';
let chckd='';
for(let i in atmp1){
  if(atmp1[i]==theme) chckd='checked';
  else                chckd='';
  
  msgstr+= "<nobr><input name='1' "+chckd+"   onclick='theme=\""+atmp1[i]+"\";' type='radio'   style='height:20px;margin-bottom:20px;'      ><span style='xheight:20px;xmargin:20px;padding:8px;border:1px solid black;' class='"+atmp1[i]+"'> "+atmp1[i]+" </span></input>&emsp;</nobr>";  

}//endfor


 msgout(msgstr );
}//endfunc
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
//--------------------------------------
</script></body></html>
